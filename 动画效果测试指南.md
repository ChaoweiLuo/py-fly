# 动画效果测试指南

本文档指导如何测试游戏中的各种动画效果。

## 测试前准备

1. 确保已安装依赖：
```bash
pip install -r requirements.txt
```

2. 启动游戏：
```bash
python src/main.py
```

---

## 测试清单

### ✅ 1. 开场欢迎动画测试

**测试步骤**:
1. 启动游戏
2. 观察开场动画

**预期效果**:
- [ ] 看到黑色背景上有星星从上往下移动
- [ ] 标题"打飞机游戏"从透明逐渐显现（淡入效果）
- [ ] 副标题"准备战斗！"同时淡入
- [ ] 约2秒后出现闪烁的"按任意键开始..."提示
- [ ] 按任意键或等待3秒后，动画自动结束

**快捷测试**: 直接按任意键跳过

---

### ✅ 2. 第一关介绍动画测试

**测试步骤**:
1. 跳过开场动画后立即观察

**预期效果**:
- [ ] 屏幕出现半透明黑色遮罩
- [ ] 彩色粒子从上往下飘落
- [ ] "第 1 关"文字从小到大缩放显示
- [ ] 显示当前分数（应为0）
- [ ] 显示提示："消灭 100 个敌人召唤Boss！"
- [ ] 约2秒后自动结束，进入游戏

---

### ✅ 3. 游戏进行状态测试

**测试步骤**:
1. 等待关卡介绍动画结束
2. 开始正常游戏

**预期效果**:
- [ ] 可以控制飞机移动
- [ ] 可以射击
- [ ] 敌人正常生成和移动
- [ ] 击杀敌人有爆炸动画效果
- [ ] 分数和击杀数正常增加

**提示**: 
- 按 'A' 键切换自动射击模式，更容易击杀敌人
- 按 '3' 键切换散弹枪，提高效率
- 按 '4' 键切换巨型子弹，高伤害

---

### ✅ 4. Boss战胜利动画测试

**测试步骤**:
1. 击杀100个敌人（建议开启自动射击）
2. Boss出现后，击败Boss
3. 观察动画

**预期效果**:
- [ ] Boss被击败瞬间出现爆炸效果
- [ ] 屏幕出现深蓝色半透明背景
- [ ] 100个星星在背景闪烁
- [ ] 8个大型烟花依次爆炸
- [ ] 烟花粒子带光晕效果
- [ ] "Boss 击败！"文字带脉冲和发光效果
- [ ] 副标题"恭喜胜利！"
- [ ] 持续约2.5秒

**快速测试技巧**:
```python
# 可以临时修改 game_scene.py 中的 Boss 出现条件
# 将 enemies_killed >= 100 改为 enemies_killed >= 5
# 这样只需击杀5个敌人就能召唤Boss
```

---

### ✅ 5. 关卡完成动画测试

**测试步骤**:
1. 完成第1关Boss战
2. 观察Boss胜利动画后的关卡完成动画

**预期效果**:
- [ ] Boss胜利动画结束后自动播放
- [ ] 半透明深色背景
- [ ] 5个烟花依次爆炸
- [ ] 每个烟花有30个彩色粒子
- [ ] 粒子带重力下落效果
- [ ] 显示"关卡完成！"标题
- [ ] 显示关卡号、总分、击杀数统计
- [ ] 显示"准备进入下一关..."提示
- [ ] 持续约3秒后自动进入第2关介绍动画

---

### ✅ 6. 第二关测试

**测试步骤**:
1. 等待第2关介绍动画
2. 再次击败Boss

**预期效果**:
- [ ] 关卡介绍显示"第 2 关"
- [ ] 提示文字为"敌人更强了，小心应对！"
- [ ] 敌人血量确实增加（第2关敌人HP=2）
- [ ] Boss血量为200（level 2 × 100）
- [ ] 击败Boss后再次播放胜利+完成动画
- [ ] 自动进入第3关

---

### ✅ 7. 第三关和通关动画测试

**测试步骤**:
1. 等待第3关介绍动画
2. 击败第3关Boss
3. 观察通关动画

**预期效果**:

**第3关介绍**:
- [ ] 显示"第 3 关"
- [ ] 提示"最终关卡，全力以赴！"

**第3关Boss战**:
- [ ] Boss血量为300（level 3 × 100）
- [ ] 击败后播放Boss胜利动画

**通关动画**:
- [ ] Boss胜利动画后直接播放通关动画（不再有关卡完成动画）
- [ ] 深色半透明背景
- [ ] 持续生成烟花（每20帧一个）
- [ ] "恭喜通关！"超大标题
- [ ] 显示最终得分
- [ ] "感谢游玩！"文字
- [ ] 持续约4秒
- [ ] 动画结束后游戏暂停（目前设计）

---

## 完整流程测试

**推荐完整测试流程**（约需15-20分钟）:

```
启动游戏
  ↓
[开场动画] - 按键跳过或等待3秒
  ↓
[第1关介绍] - 自动2秒
  ↓
[游戏中] - 击杀100个敌人
  ↓
[Boss战] - 击败Boss
  ↓
[Boss胜利动画] - 自动2.5秒
  ↓
[关卡完成动画] - 自动3秒
  ↓
[第2关介绍] - 自动2秒
  ↓
[游戏中] - 击杀100个敌人
  ↓
[Boss战] - 击败Boss
  ↓
[Boss胜利动画] - 自动2.5秒
  ↓
[关卡完成动画] - 自动3秒
  ↓
[第3关介绍] - 自动2秒
  ↓
[游戏中] - 击杀100个敌人
  ↓
[Boss战] - 击败Boss
  ↓
[Boss胜利动画] - 自动2.5秒
  ↓
[通关动画] - 自动4秒
  ↓
游戏结束
```

---

## 快速测试配置

如果想快速测试所有动画，可以临时修改以下参数：

### 方法1: 修改Boss出现条件

编辑 `src/scenes/game_scene.py`:
```python
# 找到这一行（约第43行）
if self.enemies_killed >= 100 and not self.boss_spawned:

# 改为
if self.enemies_killed >= 3 and not self.boss_spawned:
```

这样只需击杀3个敌人就能召唤Boss。

### 方法2: 降低Boss血量

编辑 `src/objects/enemy.py`:
```python
# 找到Boss类的__init__方法（约第205行）
self.hp = level * 100

# 改为
self.hp = level * 10  # Boss血量降低10倍
```

### 方法3: 加速动画播放

编辑各动画类的 `duration` 参数：
```python
# 例如在 WelcomeAnimation 中
self.duration = 180  # 改为 60 (1秒)
```

**注意**: 测试完成后记得恢复原始设置！

---

## 常见问题排查

### Q1: 看不到开场动画
- 检查是否启动时按了键，可能不小心跳过了
- 重新启动游戏

### Q2: 动画卡住不动
- 检查终端是否有错误信息
- 确认pygame版本正确（2.5.2）

### Q3: 烟花效果不明显
- 烟花是随机生成的，位置和颜色都是随机的
- 多观察几次，每次效果略有不同

### Q4: 击杀100个敌人太慢
- 使用快速测试配置（见上文）
- 开启自动射击模式（按'A'键）
- 使用散弹枪或巨型子弹（按'3'或'4'）

---

## 测试反馈

测试过程中如发现问题，请记录：
1. 问题发生的动画类型
2. 具体现象描述
3. 复现步骤
4. 系统环境信息

---

## 性能测试

观察动画播放时的性能：
- FPS应保持在50-60左右
- 如果FPS过低，可能需要优化粒子数量

---

**祝测试愉快！** 🎮✨
